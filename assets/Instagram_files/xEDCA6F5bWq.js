;/*FB_PKG_DELIM*/

__d("CometAudioLanguageMenuItemsMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29971685009145446"}),null);
__d("CometAudioLanguageMenuItemsMutation.graphql",["CometAudioLanguageMenuItemsMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetUserPreferredAudioLanguageResponsePayload",kind:"LinkedField",name:"set_user_preferred_audio_language",plural:!1,selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preferred_language_string",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometAudioLanguageMenuItemsMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometAudioLanguageMenuItemsMutation",selections:c},params:{id:b("CometAudioLanguageMenuItemsMutation_facebookRelayOperation"),metadata:{},name:"CometAudioLanguageMenuItemsMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24192497507078198"}),null);
__d("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql",["CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetUserDoNotTranslateAudioLanguagesResponsePayload",kind:"LinkedField",name:"set_user_do_not_translate_audio_languages",plural:!1,selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",selections:c},params:{id:b("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation"),metadata:{},name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometAudioLanguageMenuItemsMutation",["CometAudioLanguageMenuItemsMutation.graphql","CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=h!==void 0?h:h=b("CometAudioLanguageMenuItemsMutation.graphql");c=i!==void 0?i:i=b("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql");g.setUserPreferredAudioLanguageDataMutation=a;g.setDoNotTranslateLanguageDataMutation=c}),98);
__d("CometAudioLanguageSupportedLanguagesEnum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["EN","VI","ZH","HI","AR","PT","ES","DE","IT","FR","BN","ID","JA","KO","RU","TH","TR"]);c=a;f["default"]=c}),66);
__d("CometAudioLanguageUtils_doNotTranslate.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_doNotTranslate",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometAudioLanguageUtils_dubbingInfo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubbingInfo",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_best_language_prediction_for_dubbing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null},{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preferred_language_string",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometAudioLanguageUtils_dubtrackMapping.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubtrackMapping",selections:[{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerAudioTrackUtils",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,b){if(b==null)return void 0;a=String(a).substring(0,2);try{return new Intl.DisplayNames([a],{type:"language"}).of(b)}catch(a){return void 0}};a=function(a,b){if(a==null)return h._(/*BTDS*/"Default");b=i(b,a.lang);b=b!=null?b:h._(/*BTDS*/"Default");var c=null;a.role==="dub"?c=h._(/*BTDS*/"Dubbed"):(a==null?void 0:a.role)==="description"&&(c=h._(/*BTDS*/"Description"));return c!=null?b.toString()+" - "+c.toString():b};g.getIntlDisplayName=i;g.getAudioTrackLabelLocalized=a}),226);
__d("useVideoPlayerControllerSubscriptionProvidingNullableController",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b){var c=k(function(){return b(a,null)}),d=c[0],e=c[1],f=j(b);i(function(){f.current=b},[b]);i(function(){e(function(b){return f.current(a,b)});var b=a==null?void 0:a.subscribe(function(){e(function(b){return f.current(a,b)})});return function(){b==null||b.remove()}},[a]);return d}g["default"]=a}),98);
__d("CometAudioLanguageUtils",["AutoDubbingConsumptionFalcoEvent","AutoDubbingFalcoEvent","CometAudioLanguageMenuItemsMutation","CometAudioLanguageSupportedLanguagesEnum","CometAudioLanguageUtils_doNotTranslate.graphql","CometAudioLanguageUtils_dubbingInfo.graphql","CometAudioLanguageUtils_dubtrackMapping.graphql","CometRelay","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","cometPushToast","gkx","intlList","react","useVideoPlayerControllerSubscriptionProvidingNullableController"],(function(a,b,c,d,e,f,g){"use strict";var h=["label"],i,j,k,l,m=l||d("react"),n=m.useEffect,o=m.useMemo,p=m.useRef,q=null,r=function(a,b,d,e,f,g){var h={client_extra_data:{dubbing_type_from:d==null?"original":d,dubbing_type_to:e==null?"original":e,lang_from:a!=null?a:"original",lang_to:b!=null?b:"original",player_type:"Reel"},event:f,video_id:g!=null?g:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return h})},s=function(a,b){var c;c=(c=a==null?void 0:a.lang)!=null?c:null;(a==null?void 0:a.lang)===null&&a.role==null&&(c=b!=null?b:null);return c};m=function(a,b,d){var e={client_extra_data:{lang:a!=null?a:""},event:d,video_id:b!=null?b:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return e})};function a(a){a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometAudioLanguageUtils_dubtrackMapping.graphql"),a);return(a=a==null?void 0:a.dubbed_track_mapping)!=null?a:null}var t=function(a){var b=null;if(a!=null){b=(a=a.find(function(a){return a.dubbing_type==="NONE"&&a.audio_lang!=null}))==null?void 0:a.audio_lang}return b};function e(a,b){return o(function(){var e={},f=null;if(a!=null&&b!=null){var g={};b.forEach(function(a){var b=null;a.dubbing_type==="NONE"&&a.audio_lang!=null?(b="Default",f=a.audio_lang):b=a.audio_lang;a=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(c("CurrentLocale").get(),a.audio_lang);a!=null&&b!=null&&(g[b]=a.charAt(0).toUpperCase()+a.slice(1))});a.forEach(function(a){if(a.lang!==null&&!(a.id in e)&&a.lang in g){var b=g[a.lang];a.role==="description"&&(b=b+" \xb7 "+d("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_DESCRIPTION_LABEL.toString());e[a.id]=babelHelpers["extends"]({},a,{label:b})}else if(a.displayLabel==="Default"){var c;b=d("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL.toString();if(g[(c=a.lang)!=null?c:"Default"]){b=g[(c=a.lang)!=null?c:"Default"]+" \xb7 "+b}e[a.id]=babelHelpers["extends"]({},a,{label:b})}})}var h=Object.values(e).sort(function(a,b){if(a.role===null)return-1;return b.role===null?1:a.label.localeCompare(b.label)});return{allAvailableTracks:h,originalLanguage:f}},[a,b])}function f(a){var c;a=d("CometRelay").useFragment(j!==void 0?j:j=b("CometAudioLanguageUtils_doNotTranslate.graphql"),a);return a==null||(c=a.audio_settings)==null?void 0:c.do_not_translate_languages_string}function u(a){var b;if(a==null||a.length===0)b=null;else{var e=[];a.forEach(function(a){a=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(c("CurrentLocale").get(),a);a!=null&&(a=a.charAt(0).toUpperCase()+a.slice(1),e.push(a))});e.sort();b=c("intlList")(e)}return b}var v=function(a){var b=a.controller,c=a.originalLanguage,d=a.saveAndLogPreferredLanguage,e=a.selectedTrack,f=a.setPause,g=a.setUpdatedTargetAudioTrack,i=a.updatedTargetAudioTrack;a=a.videoId;if((b==null?void 0:b.selectVideoVariant)!=null&&e){e.label;var j=babelHelpers.objectWithoutPropertiesLoose(e,h);b.selectVideoVariant({lang:j.lang,role:j.role});f(!1,"AUDIO_LANGUAGE_SELECTOR");b=s(j,c);f=s(i!=null?i:null,c);d(f,b,i==null?void 0:i.role,e.role,a);g(j)}};function w(){var a=d("CometRelay").useMutation(d("CometAudioLanguageMenuItemsMutation").setUserPreferredAudioLanguageDataMutation),b=a[0];a[1];return function(a,c,d,e,f){c!=null&&b({onCompleted:function(a,b){},onError:function(){},variables:{input:{language_code:c}}}),r(a!=null?a:null,c!=null?c:null,d!=null?d:null,e!=null?e:null,"fb_reel_auto_dub_consumption_preferred_language_changed",f!=null?f:null)}}function x(a){var e=c("gkx")("17327"),f=c("gkx")("19163");a=d("CometRelay").useFragment(k!==void 0?k:k=b("CometAudioLanguageUtils_dubbingInfo.graphql"),a);var g=null,h=q,i=null;if(a!=null&&(a==null?void 0:a.dubbed_track_mapping)!=null&&(a==null?void 0:a.dubbed_track_mapping.length)>0&&e){var j,l,m=(e=(e=a.dubbed_track_mapping.find(function(a){return a.dubbing_type==="NONE"}))==null?void 0:e.audio_lang)!=null?e:null;e=!1;m!=null&&(e=a.dubbed_track_mapping.filter(function(a){return a.audio_lang===m}).length>1);j=(j=a.audio_settings)==null?void 0:j.do_not_translate_languages_string;var n=a==null||(l=a.audio_settings)==null?void 0:l.preferred_language_string,o=a==null?void 0:a.viewer_best_language_prediction_for_dubbing,p=a.audio_user_preferred_language;m!=null&&j!=null&&j.includes(m)?(h=m,g="fb_reel_auto_dub_consumption_do_not_translate_languages_match"):n!=null&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===n})!=null?(h=n,g="fb_reel_auto_dub_consumption_preferred_language_match"):f&&o!=null&&o!==m&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===o})!=null?(h=o,g="fb_reel_auto_dub_consumption_blp_match"):f&&p!=null&&p!==m&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===p})!=null&&(h=p,g="fb_reel_auto_dub_consumption_fallback_to_app_lang");i=h;e&&h===m&&(h=q)}return{event:g,lang:h,loggingLang:i}}function y(){var a=o(function(){var a=Array.from(c("CometAudioLanguageSupportedLanguagesEnum").members(),function(a){return a.valueOf().toLowerCase()}),b=c("CurrentLocale").get();a=a.map(function(a){var c=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(b,a);return c!=null?[a,c]:null}).filter(function(a){return a!==null&&a[1]!=null});a.sort(function(a,b){return(a[1]||"").localeCompare(b[1]||"")});return a},[]);return a}var z=function(a){var b=a.availableAudioTracks,c=a.controller,d=a.currentValue,e=a.originalVideoLanguage,f=a.selectedLanguages;a=a.setSelectedLanguages;var g;f.includes(d)?g=f.filter(function(a){return a!==d}):(g=[].concat(f,[d]),e!=null&&d===e&&A({availableAudioTracks:b,controller:c,originalVideoLanguage:e}));a(g);return g},A=function(a){var b=a.availableAudioTracks,c=a.controller;a=a.originalVideoLanguage;if(a!=null&&c!=null&&b!=null){a=b.find(function(a){return a.role==null});a!=null&&(c==null||c.selectVideoVariant({lang:a.lang,role:a.role}))}},B=function(a){var b=a.onClose,e=a.rating,f=a.ratingDetails,g=a.selectedReasons,h=a.targetAudioLang;a=a.video_id;var i={event:"fb_reel_auto_dub_feedback",extra_data:{feedback:f!=null?f:"",player_type:"Reel",rating_reasons:JSON.stringify(g),selected_language:h!=null?h:"unknown",selected_rating:e!=null?e:"unknown"},video_id:a!=null?String(a):""};c("AutoDubbingFalcoEvent").log(function(){return i});b();d("cometPushToast").cometPushToast({message:d("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_LANGUAGE_RATE_TOAST,withoutCloseButton:!0},2e3)},C=function(a,b){var d={client_extra_data:{languages:a.join(",")},event:"fb_reel_auto_dub_consumption_do_not_translate_languages_changed",video_id:b!=null?String(b):""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return d})};function D(){var a=d("CometRelay").useMutation(d("CometAudioLanguageMenuItemsMutation").setDoNotTranslateLanguageDataMutation),b=a[0];a[1];return function(a,c){b({onCompleted:function(){C(a,c)},onError:function(){},optimisticResponse:{audio_settings:{do_not_translate_languages_string:a,id:c}},variables:{input:{language_codes:a}}})}}function E(a,b){return c("useVideoPlayerControllerSubscriptionProvidingNullableController")(a,b)}var F=function(a,b,d,e){var f={client_extra_data:{fromTrackId:d!=null?d:"",reason:a,toTrackId:e!=null?e:""},event:"fb_reel_auto_dub_consumption_logger_error",video_id:b!=null?b:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return f})},G=function(a,b,c,d){var e=b==null&&(c==null?void 0:c.role)==="dub"||(b==null?void 0:b.id)!=null&&(c==null?void 0:c.id)!==(b==null?void 0:b.id),f=null;e&&(a==null?(e=!1,f="availableAudioTracks is null"):c==null?e=!1:a!=null&&b!=null&&a.find(function(a){return a.id===b.id})==null?(e=!1,f="fromTrack is not in availableAudioTracks"):a!=null&&c!=null&&a.find(function(a){return a.id===c.id})==null?(e=!1,f="toTrack is not in availableAudioTracks"):(b==null?void 0:b.id)!=null&&(b==null?void 0:b.id)===(c==null?void 0:c.id)?(e=!1,f="fromTrack and toTrack are the same"):b==null&&(c==null?void 0:c.role)!=="dub"&&(e=!1,f="toTrack is not dubbed"));!e&&f!=null&&F(f,d,b==null?void 0:b.id,c==null?void 0:c.id);return e};function H(a,b,c,d){var e=p(null);n(function(){var f=G(d,e.current,a,c);if(f){f=s((f=e.current)!=null?f:null,b);e.current==null&&f==null&&(f=b);var g=s(a,b);r(f,g,(g=(f=e.current)==null?void 0:f.role)!=null?g:null,(f=a==null?void 0:a.role)!=null?f:null,"fb_reel_auto_dub_consumption",c!=null?c:"")}e.current=a},[a,b,c,d])}g.logConsumptionLanguageChange=r;g.getSelectedLanguage=s;g.logInitialDubbingConsumption=m;g.useGetDubTrackMapping=a;g.getOriginalLanguage=t;g.useGetAllAvailableTracks=e;g.useGetUserSelectedDoNotTranslateLanguageList=f;g.useGetCurrentDoNotTranslateLanguages=u;g.changePreferredLanguage=v;g.useSaveAndLogPreferredLanguage=w;g.useUserPreferredLanguage=x;g.useAllTransalateableLanguages=y;g.changeUserPreferredDoNotTranslateLanguages=z;g.changeAudioToOriginalLanguage=A;g.logTransalationRating=B;g.logDoNotTranslateLanguageSave=C;g.useSaveAndLogDoNotTranslateLanguages=D;g.useProvidedControllerSubscription=E;g.useLogTargetAudioChange=H}),98);